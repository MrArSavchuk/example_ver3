# Feature-Sliced Design (FSD)

Этот документ описывает архитектурный подход **Feature-Sliced Design (FSD)**,
используемый в проекте, и служит ориентиром при проектировании и развитии кода.

---

## Что такое FSD

**Feature-Sliced Design** — это архитектурный подход,
в котором код организуется **по смыслу и ответственности**, а не по типам файлов.

Цель FSD:
- управлять ростом сложности
- удерживать чёткие границы ответственности
- упростить масштабирование и сопровождение проекта

---

## Основные принципы

### 1. Группировка по смыслу

Код группируется вокруг **фич, сущностей и сценариев**,  
а не вокруг технических типов (`components`, `hooks`, `utils`).

### 2. Явные границы

Каждый слой и модуль:
- знает только то, что ему разрешено
- не зависит от внутренних деталей других модулей

### 3. Изоляция бизнес-логики

UI отвечает только за отображение и пользовательское взаимодействие.
Бизнес-логика и состояние изолированы от визуального слоя.

---

## Слои архитектуры

Проект использует следующие слои (снизу вверх):

### `shared`

Базовые, переиспользуемые элементы без знания бизнес-контекста.

Содержит:
- UI-компоненты
- хуки
- утилиты
- стили
- конфигурации

`shared` **не знает** о `entities`, `features`, `widgets`, `pages`.

---

### `entities`

Модели предметной области.

Содержит:
- типы и интерфейсы сущностей
- состояние и логику сущностей
- базовые UI-элементы, привязанные к сущности

Примеры:
- `User`
- `Project`
- `Order`

---

### `features`

Пользовательские действия и сценарии.

Содержит:
- бизнес-логику действий
- UI, связанный с конкретным сценарием
- работу с состоянием и побочными эффектами

Примеры:
- `Login`
- `AddToCart`
- `ChangeLanguage`

---

### `widgets`

Композиция нескольких фич и сущностей в законченный блок интерфейса.

Содержит:
- сложные UI-блоки
- страницы или их крупные части

Примеры:
- `Header`
- `Sidebar`
- `UserProfileCard`

---

### `pages`

Страницы приложения и их композиция.

Содержит:
- сборку виджетов и фич
- минимальную логику маршрутизации

`pages` не содержит бизнес-логики.

---

### `app`

Инициализация приложения.

Содержит:
- роутинг
- провайдеры
- глобальные конфигурации
- точки входа приложения

---

## Правила зависимостей

Зависимости разрешены **только сверху вниз**:

```
app
 ↓
pages
 ↓
widgets
 ↓
features
 ↓
entities
 ↓
shared
```

Обратные зависимости запрещены.

---

## Публичный API модулей

Каждый модуль предоставляет публичный API через `index.ts`.

- внешний код использует только публичные экспорты
- внутренняя структура модуля скрыта
- рефакторинг не должен ломать внешний контракт

Подробности см. в `docs/guidelines/barrel-files.md`.

---

## Когда стоит задуматься о нарушении FSD

Нарушения допустимы **только осознанно** и фиксируются отдельно.

Причины могут быть:
- временные решения (техдолг)
- ограничения сроков
- экспериментальные части системы

Любое отклонение должно быть:
- обсуждено
- зафиксировано в `DECISIONS.md`

---

## Связанные документы

- `DECISIONS.md` — архитектурные решения проекта
- `docs/guidelines/barrel-files.md` — правила публичного API модулей
- `CONTRIBUTING.md` — правила работы с кодом

